<!doctype html>
<html lang="ko" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap" rel="stylesheet">
  <link type="text/css" th:href="@{/css/style.css}" rel="stylesheet">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.4/pagination.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.4/pagination.css"/>


  <script type="text/javascript" th:src="@{/js/basic.js}"></script>
  <title>ë‚˜ë§Œì˜ ì…€ë ‰ìƒµ</title>
</head>
<script>
  let targetId;
  let host = 'http://' + window.location.host;
  $(document).ready(function () {
    // cookie ì—¬ë¶€ í™•ì¸í•˜ì—¬ ë¡œê·¸ì¸ í™•ì¸
    const auth = getToken();

    // id ê°€ query ì¸ ë…€ì„ ìœ„ì—ì„œ ì—”í„°ë¥¼ ëˆ„ë¥´ë©´ execSearch() í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë¼ëŠ” ëœ»ì…ë‹ˆë‹¤.
    $('#query').on('keypress', function (e) {
      if (e.key == 'Enter') {
        execSearch();
      }
    });
    $('#close').on('click', function () {
      $('#container').removeClass('active');
    })
    $('#close2').on('click', function () {
      $('#container2').removeClass('active');
    })
    $('.nav div.nav-see').on('click', function () {
      $('div.nav-see').addClass('active');
      $('div.nav-search').removeClass('active');

      $('#see-area').show();
      $('#search-area').hide();
    })
    $('.nav div.nav-search').on('click', function () {
      $('div.nav-see').removeClass('active');
      $('div.nav-search').addClass('active');

      $('#see-area').hide();
      $('#search-area').show();
    })

    $('#see-area').show();
    $('#search-area').hide();

    // ì²˜ìŒ ë¡œë”© ì‹œ ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸° (ì´ë¦„ ë° í´ë”)
    if (auth !== '') {
      // ë¡œê·¸ì¸í•œ ìœ ì € ì´ë¦„
      $.ajax({
        type: 'GET',
        url: `/api/user-info`,
        beforeSend: function (xhr) {
          xhr.setRequestHeader("Authorization", auth);
        },
        success: function (response) {
          if (response === 'fail') {
            logout();
            window.location.reload();
          } else {
            $('#username').text(response);
          }
        },
        error(error, status, request) {
          console.error(error);
          logout();
          window.location.href = host + "/api/user/login-page";
        }
      });

      // ë¡œê·¸ì¸í•œ ìœ ì €ì˜ í´ë”
      $.ajax({
        type: 'GET',
        url: `/api/user-folder`,
        beforeSend: function (xhr) {
          xhr.setRequestHeader("Authorization", auth);
        },
        error(error) {
          console.error(error);
          logout();
          window.location.href = host + "/api/user/login-page";
        }
      }).done(function (fragment) {
        // console.log(fragment);
        $('#fragment').replaceWith(fragment);
      });

      $('#login-true').show();
      $('#login-false').hide();

      showProduct();
    } else {
      $('#login-false').show();
      $('#login-true').hide();
    }

  })



  function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
  }

  function execSearch() {
    /**
     * ê²€ìƒ‰ì–´ input id: query
     * ê²€ìƒ‰ê²°ê³¼ ëª©ë¡: #search-result-box
     * ê²€ìƒ‰ê²°ê³¼ HTML ë§Œë“œëŠ” í•¨ìˆ˜: addHTML
     */
            // 1. ê²€ìƒ‰ì°½ì˜ ì…ë ¥ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.
    let query = $('#query').val();

    // 2. ê²€ìƒ‰ì°½ ì…ë ¥ê°’ì„ ê²€ì‚¬í•˜ê³ , ì…ë ¥í•˜ì§€ ì•Šì•˜ì„ ê²½ìš° focus.
    if (query == '') {
      alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');
      $('#query').focus();
      return;
    }
    // 3. GET /api/search?query=${query} ìš”ì²­
    $.ajax({
      type: 'GET',
      url: `/api/search?query=${query}`,
      success: function (response) {
        $('#search-result-box').empty();
        // 4. for ë¬¸ë§ˆë‹¤ itemDtoë¥¼ êº¼ë‚´ì„œ HTML ë§Œë“¤ê³  ê²€ìƒ‰ê²°ê³¼ ëª©ë¡ì— ë¶™ì´ê¸°!
        for (let i = 0; i < response.length; i++) {
          let itemDto = response[i];
          let tempHtml = addHTML(itemDto);
          $('#search-result-box').append(tempHtml);
        }
      },
      error(error, status, request) {
        console.error(error);
        logout();
        window.location.href = host + "/api/user/login-page";
      }
    })

  }

  function addHTML(itemDto) {
    /**
     * class="search-itemDto" ì¸ ë…€ì„ì—ì„œ
     * image, title, lprice, addProduct í™œìš©í•˜ê¸°
     * ì°¸ê³ ) onclick='addProduct(${JSON.stringify(itemDto)})'
     */
    return `<div class="search-itemDto">
        <div class="search-itemDto-left">
            <img src="${itemDto.image}" alt="">
        </div>
        <div class="search-itemDto-center">
            <div>${itemDto.title}</div>
            <div class="price">
                ${numberWithCommas(itemDto.lprice)}
                <span class="unit">ì›</span>
            </div>
        </div>
        <div class="search-itemDto-right">
            <img src="../images/icon-save.png" alt="" onclick='addProduct(${JSON.stringify(itemDto)})'>
        </div>
    </div>`
  }

  function addProduct(itemDto) {
    /**
     * modal ëœ¨ê²Œ í•˜ëŠ” ë²•: $('#container').addClass('active');
     * dataë¥¼ ajaxë¡œ ì „ë‹¬í•  ë•ŒëŠ” ë‘ ê°€ì§€ê°€ ë§¤ìš° ì¤‘ìš”
     * 1. contentType: "application/json",
     * 2. data: JSON.stringify(itemDto),
     */

    const auth = getToken();

    // 1. POST /api/products ì— ê´€ì‹¬ ìƒí’ˆ ìƒì„± ìš”ì²­
    $.ajax({
      type: "POST",
      url: '/api/products',
      contentType: "application/json",
      data: JSON.stringify(itemDto),
      beforeSend: function (xhr) {
        xhr.setRequestHeader("Authorization", auth);
      },
      success: function (response) {
        // 2. ì‘ë‹µ í•¨ìˆ˜ì—ì„œ modalì„ ëœ¨ê²Œ í•˜ê³ , targetId ë¥¼ reponse.id ë¡œ ì„¤ì •
        $('#container').addClass('active');
        targetId = response.id;
      },
      error(error, status, request) {
        console.log(error)
        if(error.status === 403){
          window.location.href = host + "/api/user/forbidden";
        }else {
          console.error(error);
          logout();
          window.location.href = host + "/api/user/login-page";
        }
      }
    })
  }

  function showProduct(folderId = null) {
    /**
     * ê´€ì‹¬ìƒí’ˆ ëª©ë¡: #product-container
     * ê²€ìƒ‰ê²°ê³¼ ëª©ë¡: #search-result-box
     * ê´€ì‹¬ìƒí’ˆ HTML ë§Œë“œëŠ” í•¨ìˆ˜: addProductItem
     */
    const auth = getToken();

    let dataSource = null;

    var sorting = $("#sorting option:selected").val();
    var isAsc = $(':radio[name="isAsc"]:checked').val();

    // folder ê¸°ëŠ¥ ì¶”ê°€
    if (folderId) {
      dataSource = `/api/folders/${folderId}/products?sortBy=${sorting}&isAsc=${isAsc}`;
    } else {
      dataSource = `/api/products?sortBy=${sorting}&isAsc=${isAsc}&folderId=${folderId}`;
    }

    $('#product-container').empty();
    $('#search-result-box').empty();
    $('#pagination').pagination({
      dataSource,
      locator: 'content',
      alias: {
        pageNumber: 'page',
        pageSize: 'size'
      },
      totalNumberLocator: (response) => {
        return response.totalElements;
      },
      pageSize: 10,
      showPrevious: true,
      showNext: true,
      ajax: {
        beforeSend: function(xhr) {
          xhr.setRequestHeader("Authorization", auth);
          $('#product-container').html('ìƒí’ˆ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...');
        },
        error(error, status, request) {
          console.error(error);
          logout();
          window.location.href = host + "/api/user/login-page";
        }
      },
      callback: function(data, pagination) {
        $('#product-container').empty();
        for (let i = 0; i < data.length; i++) {
          let product = data[i];
          let tempHtml = addProductItem(product);
          $('#product-container').append(tempHtml);
        }
      }
    });
  }

  // Folder ê´€ë ¨ ê¸°ëŠ¥
  function openFolder(folderId) {
    $("button.product-folder").removeClass("folder-active");
    if (!folderId) {
      $("button#folder-all").addClass('folder-active');
    } else {
      $(`button[value='${folderId}']`).addClass('folder-active');
    }
    showProduct(folderId);
  }
  // í´ë” ì¶”ê°€ íŒì—…
  function openAddFolderPopup() {
    $('#container2').addClass('active');
  }
  // í´ë” Input ì¶”ê°€
  function addFolderInput() {
    $('#folders-input').append(
            `<input type="text" class="folderToAdd" placeholder="ì¶”ê°€í•  í´ë”ëª…">
       <span onclick="closeFolderInput(this)" style="margin-right:5px">
            <svg xmlns="http://www.w3.org/2000/svg" width="30px" fill="red" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
              <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
            </svg>
       </span>
      `
    );
  }
  function closeFolderInput(folder) {
    $(folder).prev().remove();
    $(folder).next().remove();
    $(folder).remove();
  }
  function addFolder() {
    const auth = getToken();
    const folderNames = $('.folderToAdd').toArray().map(input => input.value);
    try {
      folderNames.forEach(name => {
        if (name === '') {
          alert('ì˜¬ë°”ë¥¸ í´ë”ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
          throw new Error("stop loop");
        }
      });
    }catch (e) {
      console.log(e);
      return;
    }

    $.ajax({
      type: "POST",
      url: `/api/folders`,
      contentType: "application/json",
      data: JSON.stringify({
        folderNames
      }),
      beforeSend: function(xhr) {
        xhr.setRequestHeader("Authorization", auth);
      },
      success: function (response) {
        $('#container2').removeClass('active');
        alert('ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
        window.location.reload();
      },
      error(error, status, request) {
        console.error(error);
        logout();
        window.location.href = host + "/api/user/login-page";
      }
    })
  }

  function addProductItem(product) {
    const folders = product.folderList.map(folder =>
            `
            <span onclick="openFolder(${folder.id})">
                #${folder.name}
            </span>
        `
    );
    return `<div class="product-card">
                <div onclick="window.location.href='${product.link}'">
                    <div class="card-header">
                        <img src="${product.image}"
                             alt="">
                    </div>
                    <div class="card-body">
                        <div class="title">
                            ${product.title}
                        </div>
                        <div class="lprice">
                            <span>${numberWithCommas(product.lprice)}</span>ì›
                        </div>
                        <div class="isgood ${product.lprice > product.myprice ? 'none' : ''}">
                            ìµœì €ê°€
                        </div>
                    </div>
                </div>
                <div class="product-tags" style="margin-bottom: 20px;">
                    ${folders}
                    <span onclick="addInputForProductToFolder(${product.id}, this)">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30px" fill="currentColor" class="bi bi-folder-plus" viewBox="0 0 16 16">
                            <path d="M.5 3l.04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.684.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z"/>
                            <path d="M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z"/>
                        </svg>
                    </span>
                </div>
            </div>`;
  }

  function addInputForProductToFolder(productId, button) {
    const auth = getToken();
    $.ajax({
      type: 'GET',
      url: `/api/folders`,
      beforeSend: function(xhr) {
        xhr.setRequestHeader("Authorization", auth);
      },
      success: function (folders) {
        const options = folders.map(folder => `<option value="${folder.id}">${folder.name}</option>`)
        const form = `
                <span>
                    <form id="folder-select" method="post" autocomplete="off" action="/api/products/${productId}/folder">
                        <select name="folderId" form="folder-select">
                            ${options}
                        </select>
                        <input type="submit" value="ì¶”ê°€" style="padding: 5px; font-size: 12px; margin-left: 5px;">
                    </form>
                </span>
            `;
        $(form).insertBefore(button);
        $(button).remove();
        $("#folder-select").on('submit', function(e) {
          e.preventDefault();
          $.ajax({
            type: $(this).prop('method'),
            url : $(this).prop('action'),
            data: $(this).serialize(),
            beforeSend: function(xhr) {
              xhr.setRequestHeader("Authorization", auth);
            },
          }).done(function() {
            alert('ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
            window.location.reload();
          });
        });
      },
      error(error, status, request) {
        console.error(error);
        logout();
        window.location.href = host + "/api/user/login-page";
      }
    });
  }

  function addProductToFolder() {

  }


  function setMyprice() {
    /**
     * 1. idê°€ myprice ì¸ input íƒœê·¸ì—ì„œ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.
     * 2. ë§Œì•½ ê°’ì„ ì…ë ¥í•˜ì§€ ì•Šì•˜ìœ¼ë©´ alertë¥¼ ë„ìš°ê³  ì¤‘ë‹¨í•œë‹¤.
     * 3. PUT /api/product/${targetId} ì— dataë¥¼ ì „ë‹¬í•œë‹¤.
     *    ì£¼ì˜) contentType: "application/json",
     *         data: JSON.stringify({myprice: myprice}),
     *         ë¹ ëœ¨ë¦¬ì§€ ë§ ê²ƒ!
     * 4. ëª¨ë‹¬ì„ ì¢…ë£Œí•œë‹¤. $('#container').removeClass('active');
     * 5, ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŒì„ ì•Œë¦¬ëŠ” alertë¥¼ ë„ìš´ë‹¤.
     * 6. ì°½ì„ ìƒˆë¡œê³ ì¹¨í•œë‹¤. window.location.reload();
     */
            // 1. idê°€ myprice ì¸ input íƒœê·¸ì—ì„œ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.
    let myprice = $('#myprice').val();
    // 2. ë§Œì•½ ê°’ì„ ì…ë ¥í•˜ì§€ ì•Šì•˜ìœ¼ë©´ alertë¥¼ ë„ìš°ê³  ì¤‘ë‹¨í•œë‹¤.
    if (myprice == '') {
      alert('ì˜¬ë°”ë¥¸ ê°€ê²©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
      return;
    }
    const auth = getToken();

    // 3. PUT /api/product/${targetId} ì— dataë¥¼ ì „ë‹¬í•œë‹¤.
    $.ajax({
      type: "PUT",
      url: `/api/products/${targetId}`,
      contentType: "application/json",
      data: JSON.stringify({myprice: myprice}),
      beforeSend: function (xhr) {
        xhr.setRequestHeader("Authorization", auth);
      },
      success: function (response) {



        // 4. ëª¨ë‹¬ì„ ì¢…ë£Œí•œë‹¤. $('#container').removeClass('active');
        $('#container').removeClass('active');
        // 5. ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŒì„ ì•Œë¦¬ëŠ” alertë¥¼ ë„ìš´ë‹¤.
        alert('ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
        // 6. ì°½ì„ ìƒˆë¡œê³ ì¹¨í•œë‹¤. window.location.reload();
        window.location.reload();
      },
      error(error, status, request) {
        console.error(error);
        logout();
        window.location.href = host + "/api/user/login-page";
      }
    })
  }

  function logout(check) {
    // í† í° ê°’ ''ìœ¼ë¡œ ë®ì–´ì“°ê¸°
    document.cookie =
            'Authorization' + '=' + '' + ';path=/';
    if(check) {
      window.location.reload();
    }
  }

  function  getToken() {
    let cName = 'Authorization' + '=';
    let cookieData = document.cookie;
    let cookie = cookieData.indexOf('Authorization');
    let auth = '';
    if(cookie !== -1){
      cookie += cName.length;
      let end = cookieData.indexOf(';', cookie);
      if(end === -1)end = cookieData.length;
      auth = cookieData.substring(cookie, end);
    }

    // kakao ë¡œê·¸ì¸ ì‚¬ìš©í•œ ê²½ìš° Bearer ì¶”ê°€
    if(auth.indexOf('Bearer') === -1 && auth !== ''){
      auth = 'Bearer ' + auth;
    }

    return auth;
  }
</script>
<body>
<div class="header" style="position:relative;">
  <!--headr ì¶”ê°€ ë¶€ë¶„-->
  <div id="login-true" style="display: none">
    <div id="header-title-login-user">
      <!--            <span th:value="${username}"></span> ë‹˜ì˜-->
      <div id="username"></div> ë‹˜ì˜
    </div>
    <div id="header-title-select-shop">
      Select Shop
    </div>
    <a id="login-text" href="javascript:logout('check')">
      ë¡œê·¸ì•„ì›ƒ
    </a>
  </div>
  <div id="login-false" >
    <div id="header-title-select-shop">
      Select Shop
    </div>
    <a id="sign-text" href="/api/user/signup">
      íšŒì›ê°€ì…
    </a>
    <a id="login-text" href="/api/user/login-page">
      ë¡œê·¸ì¸
    </a>
  </div>
  <!--/headr ì¶”ê°€ ë¶€ë¶„-->
</div>
<div class="nav">
  <div class="nav-see active">
    ëª¨ì•„ë³´ê¸°
  </div>
  <div class="nav-search">
    íƒìƒ‰í•˜ê¸°
  </div>
</div>
<div id="see-area">
  <div class="folder-bar folder-black">
    <div>
      <button id="folder-all" class="folder-bar-item folder-button product-folder folder-active" onclick="openFolder()">ì „ì²´</button>
    </div>
    <div id="fragment">
      <div th:each="folder : ${folders}">
        <button class="folder-bar-item folder-button product-folder"
                th:value="${folder.id}"
                th:utext="${folder.name}"
                th:attr="onclick=|openFolder(${folder.id})|">
        </button>
      </div>
    </div>
    <div>
      <button id="folder-add" class="folder-bar-item folder-button product-folder" onclick="openAddFolderPopup()">
        <svg xmlns="http://www.w3.org/2000/svg" width="30px" fill="currentColor" class="bi bi-folder-plus" viewBox="0 0 16 16">
          <path d="M.5 3l.04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.684.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z"/>
          <path d="M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z"/>
        </svg>
      </button>
    </div>
  </div>
  <div class="pagination">
    ì •ë ¬:
    <select id="sorting" onchange="showProduct()">
      <option value="id">ID</option>
      <option value="title">ìƒí’ˆëª…</option>
      <option value="lprice">ìµœì €ê°€</option>
    </select>
    <input type="radio" name="isAsc" value="true" onchange="showProduct()" checked /> ì˜¤ë¦„ì°¨ìˆœ
    <input type="radio" name="isAsc" value="false" onchange="showProduct()" /> ë‚´ë¦¼ì°¨ìˆœ
  </div>
  <div id="pagination" class="pagination"></div>
  <ul id="product-container">
  </ul>
  <div id="container2" class="popup-container">
    <div class="popup" style="width:410px; height:auto">
      <button id="close2" class="close">
        X
      </button>
      <h1>ğŸ—‚ í´ë” ì¶”ê°€í•˜ê¸°</h1>
      <p>í´ë”ë¥¼ ì¶”ê°€í•´ì„œ ê´€ì‹¬ìƒí’ˆì„ ê´€ë¦¬í•´ë³´ì„¸ìš”!</p>
      <div id="folders-input">
        <input type="text" class="folderToAdd" placeholder="ì¶”ê°€í•  í´ë”ëª…">
        <!--                <div class="control" data-v-79d84978="" style="width:20px"><a class="button is-primary is-outlined" data-v-79d84978=""><span class="icon" data-v-79d84978=""><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" class="svg-inline&#45;&#45;fa fa-times fa-w-11" data-v-79d84978=""><path fill="currentColor" d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z" data-v-79d84978="" class=""></path></svg></span></a></div>-->
      </div>
      <div onclick="addFolderInput()">
        <svg xmlns="http://www.w3.org/2000/svg" width="30px" fill="currentColor" class="bi bi-folder-plus" viewBox="0 0 16 16">
          <path d="M.5 3l.04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.684.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z"/>
          <path d="M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z"/>
        </svg>
      </div>
      <button id="add-folder-btn" class="cta2" onclick="addFolder()">ì¶”ê°€í•˜ê¸°</button>
    </div>
  </div>
</div>
<div id="search-area">
  <div>
    <input type="text" id="query">
  </div>
  <div id="search-result-box">

  </div>
  <div id="container" class="popup-container">
    <div class="popup">
      <button id="close" class="close">
        X
      </button>
      <h1>â°ìµœì €ê°€ ì„¤ì •í•˜ê¸°</h1>
      <p>ìµœì €ê°€ë¥¼ ì„¤ì •í•´ë‘ë©´ ì„ íƒí•˜ì‹  ìƒí’ˆì˜ ìµœì €ê°€ê°€ ë–´ì„ ë•Œ<br/> í‘œì‹œí•´ë“œë ¤ìš”!</p>
      <div>
        <input type="text" id="myprice" placeholder="200,000">ì›
      </div>
      <button class="cta" onclick="setMyprice()">ì„¤ì •í•˜ê¸°</button>
    </div>
  </div>
</div>
</body>
</html>